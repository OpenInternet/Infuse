<!doctype html><html class="h-full bg-gray-50" lang=fr dir=ltr itemscope itemtype=http://schema.org/WebPage><head><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta charset=UTF-8><meta name=author content><meta name=description content="Infuse is a community-developed framework helping digital protectors advance their knowledge and skill sets in areas of specialized technical expertise (STE)"><meta name=keywords content="NGO,cybersecurity,digital security,malware,phishing,web security,OWASP"><meta name=robots content="noodp"><meta name=theme-color content="#16B364"><link rel=canonical href=https://infuse.quest/fr/learning-path/6/module-2/><link rel=alternate hreflang=en href=https://infuse.quest/en/learning-path/6/module-2/ title=English><link rel=alternate hreflang=es href=https://infuse.quest/es/learning-path/6/module-2/ title=Spanish><link rel=alternate hreflang=ar href=https://infuse.quest/ar/learning-path/6/module-2/ title="Arabic (coming soon)"><title>Journalisation du site Web pour la sécurité :: Infuse
</title><link rel=stylesheet href=https://infuse.quest/style.76ca95bf38608a552f22cb0a855a013c12e89bfe1eb77644a584dbe10855e3ef.css><link rel=apple-touch-icon href=https://infuse.quest/favicons/apple-touch-icon.png><link rel=mask-icon href=https://infuse.quest/favicons/safari-pinned-tab.svg color=#194E80><link rel=icon href=https://infuse.quest/favicons/favicon.svg><meta itemprop=name content="Journalisation du site Web pour la sécurité"><meta itemprop=description content="Les journaux de site web peuvent être essentiels pour identifier des attaques potentielles et les attaquants. Nous examinons comment les utiliser efficacement."><meta itemprop=dateModified content="2024-10-01T20:45:43+02:00"><meta itemprop=wordCount content="5241"><meta itemprop=image content="https://infuse.quest/media/images/thumbnail.png"><meta property="og:url" content="https://infuse.quest/fr/learning-path/6/module-2/"><meta property="og:site_name" content="Infuse"><meta property="og:title" content="Journalisation du site Web pour la sécurité"><meta property="og:description" content="Les journaux de site web peuvent être essentiels pour identifier des attaques potentielles et les attaquants. Nous examinons comment les utiliser efficacement."><meta property="og:locale" content="fr"><meta property="og:type" content="article"><meta property="article:section" content="learning-path"><meta property="article:modified_time" content="2024-10-01T20:45:43+02:00"><meta property="og:image" content="https://infuse.quest/media/images/thumbnail.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://infuse.quest/media/images/thumbnail.png"><meta name=twitter:title content="Journalisation du site Web pour la sécurité"><meta name=twitter:description content="Les journaux de site web peuvent être essentiels pour identifier des attaques potentielles et les attaquants. Nous examinons comment les utiliser efficacement."></head><body class="flex flex-col"><a class="sr-only focus:not-sr-only" href=#content>Passer au contenu</a><header><nav class="mx-auto flex max-w-7xl items-center justify-between bg-white p-6 lg:px-8" aria-label=Global><div class="flex items-center gap-x-12"><a href=https://infuse.quest/fr/ class="-m-1.5 p-1.5"><span class=sr-only>Infuse</span>
<img class="h-8 w-auto" src=https://infuse.quest/media/images/infuse-logo.svg alt="Infuse logo"></a><div class="hidden lg:flex lg:gap-x-12"><div class="hidden lg:flex lg:gap-x-6"><a href=https://infuse.quest/fr/about/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false>À propos d'Infuse</a>
<a href=https://infuse.quest/fr/how/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false>Comment ça marche</a>
<a href=https://infuse.quest/fr/contribute/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false>Contribuer</a>
<a href=https://infuse.quest/fr/community/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false>Community</a>
<a href=https://infuse.quest/fr/badge-descriptions/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false></a></div></div></div><div class="flex flex-1 items-center justify-end px-2 lg:ms-6"><div class=lg:max-w-56><a aria-label=Rechercher href=https://infuse.quest/fr/search class="block w-full rounded-full border-2 border-transparent p-2 text-gray-900 hover:border-green-700 focus:ring-2 focus:ring-inset focus:ring-green-700"><svg class="h-5 w-5 text-gray-500 hover:text-gray-700" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path stroke-width="1" stroke="currentcolor" fill-rule="evenodd" d="M9 3.5a5.5 5.5.0 100 11 5.5 5.5.0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75.0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"/></svg></a></div></div><div id=languageSwitcher aria-label="Language switcher" class="ms-1 flex justify-end lg:flex-grow-0"><div class=relative x-data="{ dropdown: false }"><button type=button class="-m-1.5 flex items-center p-1.5" id=language-switcher-button aria-expanded=false aria-haspopup=true x-on:click="dropdown = true">
<span class=sr-only>Ouvrir le menu des langues</span>
<span class="flex items-center"><svg xmsns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="ms-2 h-5 w-5 text-gray-500" fill="currentcolor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004.0 008.716-6.747M12 21a9.004 9.004.0 01-8.716-6.747M12 21c2.485.0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485.0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997.0 017.843 4.582M12 3A8.997 8.997.0 004.157 7.582m15.686.0A11.953 11.953.0 0112 10.5c-2.998.0-5.74-1.1-7.843-2.918m15.686.0A8.959 8.959.0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919.0 0112 16.5c-3.162.0-6.133-.815-8.716-2.247m0 0A9.015 9.015.0 013 12c0-1.605.42-3.113 1.157-4.418"/></svg>
<span class="ms-2 hidden text-sm font-semibold leading-6 text-gray-900 lg:block" aria-hidden=true>French</span></svg></span></button><div x-show="dropdown === true" @click.outside="dropdown = false" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute right-0 z-10 mt-2.5 w-24 origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none" role=menu aria-orientation=vertical aria-labelledby=user-menu-button tabindex=-1><a title=English href=https://infuse.quest/en/learning-path/6/module-2/ class="block px-3 py-1 text-sm leading-6 text-gray-900 hover:bg-gray-100 active:bg-gray-100" role=menuitem tabindex=-1>English</a>
<a title=Spanish href=https://infuse.quest/es/learning-path/6/module-2/ class="block px-3 py-1 text-sm leading-6 text-gray-900 hover:bg-gray-100 active:bg-gray-100" role=menuitem tabindex=-1>Spanish</a>
<a title="Arabic (coming soon)" href=https://infuse.quest/ar/learning-path/6/module-2/ class="block px-3 py-1 text-sm leading-6 text-gray-900 hover:bg-gray-100 active:bg-gray-100" role=menuitem tabindex=-1>Arabic (coming soon)</a></div></div></div><div id=userProfile class="ms-8 hidden"><div class=relative x-data="{ dropdown: false }"><button type=button class="-m-1.5 flex items-center p-1.5" id=user-menu-button aria-expanded=false aria-haspopup=true x-on:click="dropdown = true">
<span class=sr-only>Ouvrir le menu utilisateur</span>
<img id=avatarImage class="h-7 w-7 rounded-full object-cover" src=https://infuse.quest/media/images/user-pfp.svg alt="User profile photo">
<span class="hidden lg:flex lg:items-center"><span id=userLabel class="ms-2 text-sm font-semibold leading-6 text-gray-900" aria-hidden=true>Se connecter</span><svg class="ms-2 h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></button><div x-show="dropdown === true" @click.outside="dropdown = false" x-transition:enter="transition ease-out duration-200" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" class="absolute right-0 z-10 mt-2.5 w-max origin-top-right rounded-md bg-white py-2 shadow-lg ring-1 ring-gray-900/5 focus:outline-none" role=menu aria-orientation=vertical aria-labelledby=user-menu-button tabindex=-1><a href=https://infuse.quest/fr/profile class="block px-3 py-1 text-sm leading-6 text-gray-900 hover:bg-gray-100 active:bg-gray-100" role=menuitem tabindex=-1 id=user-menu-item-0>Votre profil</a>
<a href=https://infuse.quest/fr/badges class="block px-3 py-1 text-sm leading-6 text-gray-900 hover:bg-gray-100 active:bg-gray-100" role=menuitem tabindex=-1 id=user-menu-item-0>Badges</a>
<a id=logoutButton href=# class="block px-3 py-1 text-sm leading-6 text-gray-900 hover:bg-gray-100 active:bg-gray-100" role=menuitem tabindex=-1 id=user-menu-item-1>Se déconnecter</a></div></div></div><div id=signupButtonCTA class="ms-8 hidden"><a href=https://infuse.quest/fr/signup class="rounded-md bg-green-700 px-5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-green-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-700">S'inscrire</a></div><div id=loginButtonCTA class="ms-2 hidden"><a id=signupButtonCTA href=https://infuse.quest/fr/login class="hidden rounded-md bg-white px-5 py-2.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 lg:block">Se connecter</a></div></nav></header><main id=content class="content mb-auto"><section id=breadcrumb class="mx-auto max-w-7xl px-8 pt-8 lg:px-8 lg:pt-16"><nav class="mb-5 flex justify-start" aria-label=Breadcrumb><ol role=list class="flex items-center" itemscope itemtype=https://schema.org/BreadcrumbList><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=https://infuse.quest/fr/ class="text-gray-500 hover:text-gray-700"><span itemprop=name><svg class="me-4 h-5 w-5 flex-shrink-0" viewBox="0 0 20 20" fill="none" aria-hidden="true"><path d="M6.66667 14.1668H13.3333M9.18141 2.30345 3.52949 6.69939C3.15168 6.99324 2.96278 7.14017 2.82669 7.32417 2.70614 7.48716 2.61633 7.67078 2.56169 7.866 2.5 8.08639 2.5 8.3257 2.5 8.80433V14.8334c0 .9335.0 1.4002.18166 1.7567C2.84144 16.9037 3.09641 17.1587 3.41002 17.3185c.35652.1816.82323.1816 1.75665.1816H14.8333c.9335.0 1.4002.0 1.7567-.1816C16.9036 17.1587 17.1586 16.9037 17.3183 16.5901 17.5 16.2336 17.5 15.7669 17.5 14.8334V8.80433C17.5 8.3257 17.5 8.08639 17.4383 7.866 17.3837 7.67078 17.2939 7.48716 17.1733 7.32417 17.0372 7.14017 16.8483 6.99324 16.4705 6.69939L10.8186 2.30345c-.2928-.22771-.4392-.34156-.6008-.38533C10.0752 1.87951 9.92484 1.87951 9.78221 1.91812 9.62057 1.96189 9.47418 2.07574 9.18141 2.30345z" stroke="#667085" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/></svg>
<span class=sr-only>Accueil</span>
</span></a><meta itemprop=position content='1'></li><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><div class="flex items-center"><svg class="h-5 w-5 flex-shrink-0 text-gray-500 lg:flex" fill="currentcolor" viewBox="0 0 20 20" aria-hidden="true"><path d="M5.555 17.776l8-16 .894.448-8 16-.894-.448z"/></svg>
<a class="me-2 ms-3 text-sm font-medium text-gray-500 underline hover:text-gray-700 hover:no-underline" aria-current=page itemprop=item href=https://infuse.quest/fr/learning-path/><span itemprop=name>Parcours d'apprentissage</span>
</a><meta itemprop=position content='2'></div></li><li itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><div class="flex items-center"><svg class="h-5 w-5 flex-shrink-0 text-gray-500 lg:flex" fill="currentcolor" viewBox="0 0 20 20" aria-hidden="true"><path d="M5.555 17.776l8-16 .894.448-8 16-.894-.448z"/></svg>
<a class="me-2 ms-3 text-sm font-medium text-gray-500 underline hover:text-gray-700 hover:no-underline" aria-current=page itemprop=item href=https://infuse.quest/fr/learning-path/6/><span itemprop=name>Renforcement des applications Web, investigation et intervention en cas d'incident</span>
</a><meta itemprop=position content='3'></div></li><li class="hidden lg:flex" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><div class="flex items-center"><svg class="h-5 w-5 flex-shrink-0 text-gray-500 underline" fill="currentcolor" viewBox="0 0 20 20" aria-hidden="true"><path d="M5.555 17.776l8-16 .894.448-8 16-.894-.448z"/></svg>
<a class="text-sm font-medium text-gray-500 underline hover:text-gray-700 hover:no-underline sm:ms-2" aria-current=page itemprop=item href=https://infuse.quest/fr/learning-path/6/module-2/><span itemprop=name>Journalisation du site Web pour la sécurité</span>
</a><meta itemprop=position content='4'></div></li></ol></nav></section><div class="relative flex flex-col justify-center py-6 sm:px-6 lg:px-8 lg:py-12"><section class="prose prose-stone mx-auto w-full max-w-3xl flex-col px-8 prose-hr:w-full lg:flex lg:items-center lg:justify-between lg:px-8"><article class="flex w-full flex-col items-start justify-between border-b border-gray-300"><p class="mb-1 text-sm text-gray-500">Module 2</p><h1 class="mb-0 text-3xl font-semibold text-gray-900">Journalisation du site Web pour la sécurité</h1><div class="w-full items-center justify-between lg:flex"><p class="me-2 inline-flex text-sm font-semibold text-green-900">Dernière mise à jour le: 1 Octobre 2024</p><a id=githubEdit href=https://github.com/OpenInternet/Infuse/blob/main/content/learning-path/6/module-2.fr.md target=_blank rel="noopener noreferrer" class="mb-5 me-6 inline-flex items-center text-sm font-semibold text-green-800 underline hover:text-green-900 hover:no-underline sm:mb-0 lg:mb-0 lg:me-0"><svg class="me-2 h-5 w-5" role="img" viewBox="0 0 24 24"><title>GitHub</title><path d="M12 .297c-6.63.0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577.0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93.0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176.0.0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22.0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22.0 1.606-.015 2.896-.015 3.286.0.315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12" fill="currentcolor"/></svg> Modifier cette page sur GitHub
</a><button id=printButton class="mb-5 inline-flex items-center text-sm font-semibold text-green-800 underline hover:text-green-900 hover:no-underline sm:mb-0 lg:mb-0">
<svg class="me-2 h-5 w-5" role="img" viewBox="0 0 24 24" fill="none" stroke-width="1.5" stroke="currentcolor"><title>Print</title><path stroke-linecap="round" stroke-linejoin="round" d="M6.72 13.829c-.24.03-.48.062-.72.096m.72-.096a42.415 42.415.0 0110.56.0m-10.56.0L6.34 18m10.94-4.171c.24.03.48.062.72.096m-.72-.096L17.66 18m0 0 .229 2.523a1.125 1.125.0 01-1.12 1.227H7.231c-.662.0-1.18-.568-1.12-1.227L6.34 18m11.318.0h1.091A2.25 2.25.0 0021 15.75V9.456c0-1.081-.768-2.015-1.837-2.175a48.055 48.055.0 00-1.913-.247M6.34 18H5.25A2.25 2.25.0 013 15.75V9.456c0-1.081.768-2.015 1.837-2.175a48.041 48.041.0 011.913-.247m10.5.0a48.536 48.536.0 00-10.5.0m10.5.0V3.375c0-.621-.504-1.125-1.125-1.125h-8.25c-.621.0-1.125.504-1.125 1.125v3.659M18 10.5h.008v.008H18V10.5zm-3 0h.008v.008H15V10.5z"/></svg> Imprimer au format PDF</button></div></article><article class="relative flex w-full flex-col items-start justify-between"><div class="w-full visited:prose-a:text-purple-800"><h2 id=cas-dutilisation>Cas d&rsquo;utilisation <a aria-label=#cas-dutilisation href=#cas-dutilisation class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h2><p>Tout site Web exposé à Internet est constamment attaqué. Au minimum, il est inondé par des attaques non dirigées par des hordes de robots exploités par des acteurs criminels. Les attaques ciblées sont plus préoccupantes. Même les cybercriminels non qualifiés, s&rsquo;ils font preuve de persévérance et de chance, peuvent découvrir des vulnérabilités sur un site Web.</p><p>Idéalement, le propriétaire du site Web devrait avoir conscience des menaces auxquelles le site est confronté. Les propriétaires de sites en particulier voudront savoir si un cybercriminel est proche de trouver, ou a récemment trouvé, une vulnérabilité dans leur site. Enfin, si une vulnérabilité est exploitée, les propriétaires de sites voudront savoir où se trouve la vulnérabilité et pendant combien de temps elle a été exploitée. Les journaux de site Web peuvent soutenir tous ces désirs.</p><p>D&rsquo;autre part, une journalisation excessive peut présenter un risque pour les utilisateurs des sites Web. Si un site enregistre des informations sensibles et que ces journaux sont acquis par un cybercriminel (par exemple, une saisie par les forces de l&rsquo;ordre ou une compromission par des pirates informatiques), les informations sensibles pourraient facilement se retrouver entre de mauvaises mains.</p><p>Ce sous-thème couvrira les approches de journalisation des sites Web afin de maximiser l&rsquo;utilité pour les propriétaires de sites Web et de minimiser les risques pour les utilisateurs du site.</p><h2 id=objectifs>Objectifs <a aria-label=#objectifs href=#objectifs class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h2><p>Après avoir terminé ce sous-thème, les participants devraient être en mesure de faire ce qui suit :</p><ul><li>Comprendre la journalisation intégrée pour les principaux serveurs Web</li><li>Comprendre les journaux spécifiques aux applications à ajouter pour détecter les attaques</li><li>Savoir comment minimiser les informations sensibles dans les journaux</li></ul><hr><h2 id=section-principale>Section Principale <a aria-label=#section-principale href=#section-principale class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h2><p>Même avec les meilleures compétences, intentions et procédures possible, il est presque impossible de développer un site Web qui résiste complètement à tout type d&rsquo;attaque. Avec suffisamment de temps et de malchance, chaque site présentera un incident de sécurité. Lorsque cela se produit, il est important d&rsquo;avoir mis en place une journalisation qui prend en charge la détection et l&rsquo;investigation des événements de sécurité. En même temps, il est important que les journaux d&rsquo;un site Web ne posent pas de risques supplémentaires. Ce sous-thème vous apprendra comment aborder la journalisation pour maximiser la sécurité d&rsquo;un site. Nous aborderons :</p><ul><li>Les journaux intégrés pour les plateformes populaires</li><li>L&rsquo;ajout de journaux pour capturer des événements de sécurité importants</li><li>La minimisation des risques associés à la journalisation</li></ul><h3 id=la-journalisation-intégrée>La journalisation intégrée <a aria-label=#la-journalisation-intégrée href=#la-journalisation-intégrée class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h3><p>Les diverses plateformes Web ont leurs propres systèmes de journalisation. Nous pouvons compter sur eux pour enregistrer des données sur chaque requête et réponse, mais ils ne sont généralement pas suffisants pour tous les besoins d&rsquo;intervention en cas d&rsquo;incident. Passons en revue ce qui est disponible dans les registres de certains frameworks.</p><h4 id=apache>Apache <a aria-label=#apache href=#apache class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>Apache est le serveur Web complet le plus populaire sur Internet et sert les sites les plus actifs. Par défaut, il enregistre les événements sur le système de fichiers du serveur Web. Cela comprend deux fichiers : access_log et error_log. Le journal d&rsquo;accès contient des informations structurées sur chaque requête, tandis que le journal d&rsquo;erreurs contient plus de données semi-structurées sur les problèmes qui se sont présentés.</p><p>Le journal d&rsquo;accès comprend une ligne par entrée, avec un format configurable. Le format par défaut est le suivant, chacun séparé par un espace :</p><ul><li>L&rsquo;adresse IP du demandeur</li><li>L&rsquo;utilisateur connecté sur l&rsquo;appareil demandeur. Cette information n&rsquo;est presque jamais envoyée et se limite presque toujours à un simple tiret.</li><li>L&rsquo;utilisateur se connecte si le site Web utilise l&rsquo;authentification HTTP de base. Il s&rsquo;agit s&rsquo;agira presque toujours d&rsquo;un tiret.</li><li>La date et l&rsquo;heure de la requête, entourées de crochets. Notez que ce champ contient généralement des espaces.</li><li>La ligne de requête HTTP envoyée depuis le client, entourée de guillemets (p. ex., &ldquo;GET / HTTP/1.1&rdquo;). Ces champs auront toujours des espaces.</li><li>Le code de réponse HTTP du serveur, p. ex., 200, 404, 500, etc.</li><li>La taille de la réponse retournée par le serveur</li></ul><p>Voici un exemple :</p><pre tabindex=0><code>127.0.0.1 - - \[13/Dec/2023:13:55:36 -0700\] &#34;GET / HTTP/1.1&#34; 200 2326
</code></pre><p>Notez que chaque serveur Apache peut être configuré pour enregistrer plus de données. Pour obtenir plus d&rsquo;informations, consultez <a href=https://httpd.apache.org/docs/2.4/logs.html#accesslog target=_blank>la documentation Apache</a>. Pour en savoir plus sur le journal d&rsquo;accès Apache et la façon de l&rsquo;utiliser, consultez <a href=https://www.keycdn.com/support/apache-access-log target=_blank>cet article</a>.</p><p>Le journal d&rsquo;erreurs se compose d&rsquo;un mélange de messages d&rsquo;Apache qui sont dans un format semi-structuré et de messages d&rsquo;erreur provenant de sites Web exécutés sur le serveur, sans aucune structure imposée. La structure par défaut des entrées du journal des erreurs d&rsquo;Apache est une ligne par entrée, avec les champs suivants, séparés à nouveau par des espaces :</p><ul><li>La date et l&rsquo;heure de la requête, entourées de crochets. Notez que ce champ contient généralement des espaces.</li><li>Le niveau d&rsquo;erreur (p. ex., avis, erreur) entouré de crochets.</li><li>Si l&rsquo;erreur est associée à une requête, le mot « client » et l&rsquo;adresse IP du demandeur, le tout entre crochets.</li><li>Le message d&rsquo;erreur lui-même, qui contiendra presque toujours un certain nombre d&rsquo;espaces</li></ul><p><a href=https://www.dataset.com/blog/apache-error-log-detail/ target=_blank>Cet article</a> fournit plus d&rsquo;informations sur l&rsquo;utilisation du journal d&rsquo;erreurs Apache.</p><h4 id=iis>IIS <a aria-label=#iis href=#iis class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>IIS est le serveur Web Windows par défaut et également un serveur Web très populaire. Comme Apache, IIS enregistre également, par défaut, les requêtes vers le système de fichiers du serveur Web. Plusieurs formats de journaux sont disponibles, mais le format par défaut est le format W3C, qui enregistre les éléments suivants, séparés par des espaces :</p><ul><li>Heure de la requête</li><li>Adresse IP du demandeur</li><li>Méthode HTTP (p. ex., <code>GET</code>, <code>POST</code>, <code>HEAD</code>, etc.)</li><li>URL (p. ex., <code>/</code>, <code>/index.htm</code>, <code>/posts/34/reply</code>, etc.)</li><li>Code de réponse du serveur (p. ex., <code>200</code>, <code>404</code>, <code>500</code>, etc.)</li><li>Version du protocole HTTP (p. ex., <code>HTTP/1.1</code>)</li></ul><p>Notez que les journaux par défaut n&rsquo;enregistrent pas la chaîne de la requête, par exemple une requête <a href="http://example.com/profile?profileID=34" target=_blank>http://example.com/profile?profileID=34</a> n&rsquo;enregistrera que /profile. Pour obtenir plus d&rsquo;informations sur les journaux d&rsquo;accès IIS, consultez la <a href=https://learn.microsoft.com/en-us/windows/win32/http/server-side-logging-in-http-version-2-0 target=_blank>documentation Microsoft</a>.</p><p>Les journaux d&rsquo;erreurs sous IIS sont légèrement plus compliqués. Selon l&rsquo;erreur, ils peuvent être consignés dans le fichier journal HTTP.SYS HTTPERR ou dans le journal des événements Windows.</p><p>Le fichier HTTPERR contient des erreurs au niveau du protocole et est structuré, les champs suivants étant séparés par des espaces :</p><ul><li>Date de la requête</li><li>Heure de la requête</li><li>Adresse IP du demandeur</li><li>Port du demandeur (pas le port du serveur)</li><li>Adresse IP du serveur</li><li>Port du serveur</li><li>Protocole HTTP (p. ex., <code>HTTP/1.1</code>)</li><li>Méthode HTTP (p. ex., <code>GET</code>, <code>POST</code>, <code>HEAD</code>, etc.)</li><li>L&rsquo;URL et la chaîne de la requête</li><li>Code de réponse du serveur (p. ex., <code>200</code>, <code>404</code>, <code>500</code>, etc.)</li><li>Un trait littéral</li><li>Une chaîne de type erreur (pas d&rsquo;espaces)</li></ul><p>Pour obtenir plus d&rsquo;informations sur le journal des erreurs, consultez la <a href=https://learn.microsoft.com/en-us/troubleshoot/developer/webapps/aspnet/site-behavior-performance/error-logging-http-apis target=_blank>documentation Microsoft</a>.</p><p>Le journal des événements Windows contient des erreurs générées par le serveur d&rsquo;applications (p. ex., ASP.NET) ou l&rsquo;application. Ils sont disponibles dans l&rsquo;Observateur d&rsquo;événements Windows et sont semi-structurés :</p><ul><li>Niveau d&rsquo;erreur (p. ex., <code>Information</code>, <code>Avertissement</code>, <code>Erreur</code>)</li><li>Date et heure</li><li>Le logiciel qui a enregistré l&rsquo;erreur (les entrées de journal peuvent provenir de n&rsquo;importe quel logiciel sur le système, pas seulement du serveur Web)</li><li>Un ID unique de l&rsquo;événement/erreur</li><li>Catégorie</li><li>Informations non structurées spécifiques à l&rsquo;erreur</li></ul><p>Pour obtenir plus d&rsquo;informations sur la recherche des journaux d&rsquo;erreurs sur Windows, consultez <a href=https://stackify.com/beyond-iis-logs-find-failed-iis-asp-net-requests/ target=_blank>cet article</a>.</p><h4 id=nginx>nginx <a aria-label=#nginx href=#nginx class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>Selon la façon dont vous comptez, nginx peut être le serveur Web le plus populaire sur Internet, mais il est assez limité et agit généralement comme un proxy inverse à un serveur Web back-end ou servant des fichiers statiques.</p><p>Les journaux d&rsquo;accès par défaut sont similaires aux journaux Apache par défaut, mais avec les champs suivants à la fin de chaque ligne :</p><ul><li>Valeur de l&rsquo;en-tête référant envoyé avec la requête</li><li>Agent utilisateur (version du navigateur) envoyé avec la requête</li></ul><p>Pour obtenir plus d&rsquo;informations sur les journaux nginx, consultez la <a href=https://docs.nginx.com/nginx/admin-guide/monitoring/logging/ target=_blank>documentation officielle</a>.</p><p>Les journaux d&rsquo;erreurs nginx sont semi-structurés, avec les champs suivants, séparés par des espaces :</p><ul><li>La date de la requête</li><li>L&rsquo;heure de la requête</li><li>Le niveau d&rsquo;erreur entre crochets</li><li>Les informations d&rsquo;ID du processus sur l&rsquo;instance nginx qui a enregistré l&rsquo;erreur</li><li>Un ID de connexion (facultatif)</li><li>Le message d&rsquo;erreur en texte libre</li></ul><p>Pour obtenir plus d&rsquo;informations, consultez <a href=https://trunc.org/learning/nginx-log-analysis target=_blank>cet article</a>.</p><h4 id=journaux-cdn-en-amont>Journaux CDN en amont <a aria-label=#journaux-cdn-en-amont href=#journaux-cdn-en-amont class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>Si un site est derrière un CDN, il est souvent utile de voir les journaux des requêtes au CDN, par opposition aux requêtes du CDN envoyées au site d&rsquo;origine. Chaque fournisseur de CDN fournit des journaux différemment et a des structures de prix différentes pour la journalisation.</p><h4 id=configuration-de-la-journalisation-du-serveur>Configuration de la journalisation du serveur <a aria-label=#configuration-de-la-journalisation-du-serveur href=#configuration-de-la-journalisation-du-serveur class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>Lors de la configuration de la journalisation du serveur, quelques étapes doivent être réalisées pour maximiser la valeur de sécurité des journaux.</p><ul><li>Assurez-vous que les journaux contiennent au moins l&rsquo;adresse IP du demandeur, l&rsquo;URL complète demandée (y compris la chaîne de la requête), le temps nécessaire pour servir la requête, la taille de la réponse, le référent et l&rsquo;agent utilisateur. Ces informations peuvent être extrêmement utiles lors d&rsquo;une enquête sur un incident.</li><li>Essayez d&rsquo;obtenir les journaux hors du serveur Web aussi rapidement que possible. Si le serveur lui-même est compromis, les cybercriminels tenteront probablement de cacher leurs traces en supprimant ou en modifiant les journaux du serveur. Voici quelques façons d&rsquo;y parvenir :<ul><li>Avoir un processus qui extrait les fichiers journaux du serveur périodiquement. L&rsquo;envoi de journaux à partir du serveur Web est correct, mais il est important que le processus d&rsquo;envoi ne puisse pas être utilisé pour supprimer les journaux sauvegardés.</li><li>Les journaux « Stream » du serveur Web vers un serveur distant, par exemple, avec syslog-ng. Cela offre une grande protection contre la perte de journaux. Il est généralement judicieux de conserver les journaux sur le serveur Web, en cas d&rsquo;interruption du réseau.</li></ul></li></ul><h4 id=limitations-de-la-journalisation-du-serveur>Limitations de la journalisation du serveur <a aria-label=#limitations-de-la-journalisation-du-serveur href=#limitations-de-la-journalisation-du-serveur class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>Même lorsqu&rsquo;ils sont entièrement configurés, les journaux de serveur intégrés manquent beaucoup d&rsquo;informations importantes. À titre d&rsquo;exemples :</p><ul><li>Les informations du paramètre POST ne sont pas incluses. Si un cybercriminel effectue des attaques au niveau de l&rsquo;application contre une page qui accepte les paramètres POST, il n&rsquo;y aura aucun moyen de voir ces attaques dans les journaux.</li><li>Bien que les journaux d&rsquo;erreurs puissent contenir des informations sur les erreurs de système de fichiers et de base de données qui se produisent lorsque les cybercriminels exploitent des vulnérabilités, ils ne sont généralement pas suffisants pour comprendre beaucoup de choses sur l&rsquo;attaque. P. ex., des journaux d&rsquo;erreurs élevés peuvent indiquer une attaque en cours, mais peuvent également indiquer un bug non lié à la sécurité, et il peut s&rsquo;avérer très difficile de distinguer les deux.</li><li>Aucune information d&rsquo;identité n&rsquo;est incluse. Bien que tous les journaux incluent l&rsquo;adresse IP, plusieurs utilisateurs peuvent avoir la même adresse IP.</li></ul><p>La plupart de ces informations ne sont pas incluses pour de bonnes raisons. Une grande partie peut avoir de mauvaises implications pour la vie privée des utilisateurs. D&rsquo;autres (comme la journalisation des erreurs utiles) nécessitent un aperçu de l&rsquo;application elle-même, et ne peuvent donc pas être effectuées par le serveur Web.</p><h4 id=approche-de-la-journalisation-pour-la-sécurité>Approche de la journalisation pour la sécurité <a aria-label=#approche-de-la-journalisation-pour-la-sécurité href=#approche-de-la-journalisation-pour-la-sécurité class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>L&rsquo;objectif principal de la journalisation au niveau de l&rsquo;application dans une application Web est de surmonter les limites de la journalisation du serveur. Il existe de nombreux articles décrivant les bonnes pratiques en matière de journalisation, en voici quelques-uns :</p><ul><li><a href=https://www.dnsstuff.com/security-log-best-practices target=_blank>Un aperçu de la journalisation de sécurité</a></li><li><a href=https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html target=_blank>Un article de l&rsquo;OWASP sur la journalisation des sites Web</a></li><li><a href=https://cheatsheetseries.owasp.org/cheatsheets/Logging_Vocabulary_Cheat_Sheet.html target=_blank>Un article de l&rsquo;OWASP sur le fait d&rsquo;avoir un format cohérent pour les journaux</a></li></ul><p>Ces ressources devraient vous fournir les connaissances dont vous avez besoin pour intégrer la connexion de sécurité dans une application Web existante (ou nouvelle).</p><h4 id=journalisation-et-informations-sensibles>Journalisation et informations sensibles <a aria-label=#journalisation-et-informations-sensibles href=#journalisation-et-informations-sensibles class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>Lorsque nous surmontons les limites de la journalisation serveur intégrée, nous voulons nous assurer de ne pas mettre les utilisateurs du site en danger. Il arrive fréquemment que les journaux soient moins bien protégés que les bases de données de production. Tout d&rsquo;abord, les journaux ne sont pas une cible aussi évidente qu&rsquo;une base de données de production, de sorte que les utilisateurs ont tendance à ne pas se concentrer sur eux lors de la mise en place de mesures de sécurité. Deuxièmement, il arrive souvent qu&rsquo;un plus grand nombre d&rsquo;utilisateurs d&rsquo;une organisation aient accès aux journaux qu&rsquo;à une base de données de production. Troisièmement, les journaux ont tendance à être envoyés à de nombreux systèmes différents, tandis que les bases de données de production ont tendance à rester centralisées. Pour cette raison, il convient d&rsquo;envisager de caviarder les informations sensibles dans les journaux.</p><p><a href=https://www.skyflow.com/post/how-to-keep-sensitive-data-out-of-your-logs-nine-best-practices target=_blank>Cet article</a> empêche certaines bonnes pratiques générales pour le traitement des données sensibles lors de la journalisation. Voici quelques approches à envisager pour certains types de données :</p><h5 id=paramètres-post>Paramètres POST <a aria-label=#paramètres-post href=#paramètres-post class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h5><p>Il est recommandé de ne pas inclure d&rsquo;informations sensibles dans les paramètres GET, c&rsquo;est pourquoi les paramètres GET sont enregistrés, mais pas les paramètres POST. Cependant, il peut être extrêmement utile d&rsquo;avoir accès à des informations sur les paramètres POST lors de la réponse à une attaque. Voici quelques mesures à prendre :</p><ul><li>Certaines pages (p. ex., la page d&rsquo;ouverture de session) et/ou certains paramètres (numéro de carte de crédit, champs de mot de passe) devraient être exemptés de journalisation</li><li>Pour les paramètres POST qui seront enregistrés, envisagez de les supprimer pour masquer les informations potentiellement sensibles, tout en restant en mesure d&rsquo;identifier le trafic malveillant. Le code Python suivant peut vous inspirer :</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>keep <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;select&#39;</span>, <span style=color:#e6db74>&#39;where&#39;</span>, <span style=color:#e6db74>&#39;from&#39;</span>, <span style=color:#e6db74>&#39;and&#39;</span>, <span style=color:#e6db74>&#39;script&#39;</span>, <span style=color:#e6db74>&#39;on&#39;</span>, <span style=color:#e6db74>&#39;src&#39;</span>, <span style=color:#e6db74>&#39;../&#39;</span>, <span style=color:#e6db74>&#39;&lt;&#39;</span>, <span style=color:#e6db74>&#39;&gt;&#39;</span>]
</span></span><span style=display:flex><span>output <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> i <span style=color:#f92672>&lt;</span> len(target):
</span></span><span style=display:flex><span>  matched <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> j <span style=color:#f92672>in</span> keep:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> target[i:i<span style=color:#f92672>+</span>len(j)]<span style=color:#f92672>.</span>lower() <span style=color:#f92672>==</span> j<span style=color:#f92672>.</span>lower():
</span></span><span style=display:flex><span>      output <span style=color:#f92672>=</span> output <span style=color:#f92672>+</span> target[i:i<span style=color:#f92672>+</span>len(j)]
</span></span><span style=display:flex><span>      i<span style=color:#f92672>=</span>i<span style=color:#f92672>+</span>len(j)
</span></span><span style=display:flex><span>      matched <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> matched:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39; &#39;</span> <span style=color:#f92672>==</span> target[i:i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>]:
</span></span><span style=display:flex><span>      output <span style=color:#f92672>=</span> output <span style=color:#f92672>+</span> <span style=color:#e6db74>&#39; &#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> re<span style=color:#f92672>.</span>search(<span style=color:#e6db74>&#39;\w&#39;</span>, target[i:i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>]):
</span></span><span style=display:flex><span>      output <span style=color:#f92672>=</span> output <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;A&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>elif</span> re<span style=color:#f92672>.</span>search(<span style=color:#e6db74>&#39;\d&#39;</span>, target[i:i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>]):
</span></span><span style=display:flex><span>      output <span style=color:#f92672>=</span> output <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;1&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>      output <span style=color:#f92672>=</span> output <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;*&#34;</span>
</span></span><span style=display:flex><span>    i <span style=color:#f92672>=</span> i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span></span></span></code></pre></div><h5 id=erreurs-liées-à-la-sécurité>Erreurs liées à la sécurité <a aria-label=#erreurs-liées-à-la-sécurité href=#erreurs-liées-à-la-sécurité class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h5><p>Si une requête provoque une erreur qui ressemble à une tentative de piratage ou de contournement des contrôles, le site Web doit consigner agressivement les informations de la requête. Voici quelques exemples :</p><ul><li>Requêtes de base de données qui déclenchent une erreur</li><li>Requêtes pour un élément de données auquel l&rsquo;utilisateur n&rsquo;a pas accès</li><li>Erreurs ou données vides lors de la tentative de lecture d&rsquo;un fichier</li></ul><p>Si l&rsquo;un de ces cas se produit, il est conseillé de consigner la requête, ainsi que les informations internes (par exemple, requête de base de données, nom de fichier, etc.). Dans le scénario optimiste, il y a un simple bug dans le site. Dans ce cas, il y a beaucoup d&rsquo;informations de débogage. Dans le scénario pessimiste, le site est compromis. Dans ce cas, il est plus facile de trouver où la faille s&rsquo;est produite, de sorte que l&rsquo;investigation soit plus efficace.</p><h5 id=informations-didentité>Informations d&rsquo;identité <a aria-label=#informations-didentité href=#informations-didentité class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h5><p>La journalisation de l&rsquo;identité d&rsquo;un utilisateur connecté peut être dangereuse, mais des mesures peuvent être prises pour atténuer le danger. Il est douteux de journaliser des cookies de session, mais un hachage d&rsquo;un ID de session peut être utilisé pour suivre l&rsquo;activité d&rsquo;un utilisateur sur le site. En outre, si le serveur Web dispose d&rsquo;un répertoire interrogeable des sessions utilisateur actives, un ID interne peut être utilisé dans les journaux ou les ID de session existants peuvent être hachés pour identifier les entrées de journal d&rsquo;un utilisateur connecté. Cela permettra aux propriétaires du site d&rsquo;identifier un cybercriminel actif, tout en rendant les identités dans les journaux inutiles pour un acteur de menace.</p><h2 id=exercice-pratique>Exercice pratique <a aria-label=#exercice-pratique href=#exercice-pratique class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h2><p>Lisez les commandes d&rsquo;exemple suivantes qui utilisent des outils Unix courants comme awk, sort, uniq et grep pour effectuer l&rsquo;analyse sur les journaux Apache et Nginx.</p><h3 id=une-brève-introduction-aux-outils-danalyse-de-texte-unix>Une brève introduction aux outils d&rsquo;analyse de texte Unix <a aria-label=#une-brève-introduction-aux-outils-danalyse-de-texte-unix href=#une-brève-introduction-aux-outils-danalyse-de-texte-unix class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h3><p>Voici des exemples de commandes utilisant des outils Unix courants comme <code>awk</code>, <code>sort</code>, <code>uniq</code> et <code>grep</code> pour effectuer l&rsquo;analyse sur les journaux Apache et Nginx.</p><p><code>awk</code> est un puissant outil de ligne de commande pour manipuler des fichiers texte dans des systèmes d&rsquo;exploitation de type Unix. Sa syntaxe est simple. La structure de base d&rsquo;une commande <code>awk</code> est la suivante :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-awk data-lang=awk><span style=display:flex><span><span style=color:#a6e22e>awk</span> <span style=color:#e6db74>&#39;pattern { action }&#39;</span> <span style=color:#a6e22e>file</span></span></span></code></pre></div><p>Prenons par exemple le fichier texte suivant (nous l&rsquo;appellerons exemple.txt) :</p><pre tabindex=0><code>apple red 5
banana yellow 10
pear green 15
Orange orange 20
</code></pre><p><code>awk</code> analyse le fichier d&rsquo;entrée ligne par ligne et effectue une action spécifiée pour chaque ligne si le motif correspond. awk divise automatiquement chaque ligne de saisie en champs en fonction des espaces (par défaut). Les champs peuvent être référencés en utilisant $1, $2, etc., où $1 fait référence au premier champ, $2 au second, et ainsi de suite.</p><p>Par exemple, pour imprimer la première colonne avec la commande <code>awk</code>, nous devons utiliser</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-awk data-lang=awk><span style=display:flex><span><span style=color:#a6e22e>awk</span> <span style=color:#e6db74>&#39;{ print $1 }&#39;</span> <span style=color:#a6e22e>example</span>.<span style=color:#a6e22e>txt</span></span></span></code></pre></div><p>Nous pouvons utiliser le filtrage conditionnel. Par exemple, nous voulons imprimer des lignes où la troisième colonne est supérieure à 10</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-awk data-lang=awk><span style=display:flex><span><span style=color:#a6e22e>awk</span> <span style=color:#e6db74>&#39;$3 &gt; 10 {print $1, $3}&#39;</span> <span style=color:#a6e22e>example</span>.<span style=color:#a6e22e>txt</span></span></span></code></pre></div><p>Pour utiliser un délimiteur personnalisé avec <code>awk</code>, utilisez l&rsquo;option <code>-F</code> suivie du caractère délimiteur. Par exemple, si nous avons un fichier délimité par des virgules, nous pouvons utiliser <code>-F','</code> (joindre le caractère délimiteur dans des guillemets simples) pour spécifier une virgule (,) comme délimiteur.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-awk data-lang=awk><span style=display:flex><span><span style=color:#a6e22e>awk</span> <span style=color:#f92672>-</span><span style=color:#a6e22e>F</span><span style=color:#e6db74>&#39;,&#39;</span> <span style=color:#e6db74>&#39;{print $1, $3}&#39;</span> <span style=color:#a6e22e>délimité</span><span style=color:#f92672>-</span><span style=color:#a6e22e>par</span><span style=color:#f92672>-</span><span style=color:#a6e22e>des</span><span style=color:#f92672>-</span><span style=color:#a6e22e>virgules</span>.<span style=color:#a6e22e>txt</span></span></span></code></pre></div><p>Nous pouvons faire des calculs en utilisant <code>awk</code>. Cette commande calcule la somme des valeurs dans le troisième champ sur toutes les lignes et imprime le total à la fin. « END » est un modèle spécial utilisé pour exécuter des instructions une fois que le dernier enregistrement est traité</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-awk data-lang=awk><span style=display:flex><span><span style=color:#a6e22e>awk</span> <span style=color:#e6db74>&#39;{total += $3} END {print &#34;Total:&#34;, total}&#39;</span> <span style=color:#a6e22e>exemple</span>.<span style=color:#a6e22e>txt</span></span></span></code></pre></div><p>Il y a quelques variables intégrées dans <code>awk</code>. Par exemple, <code>NR</code> est une variable intégrée dans awk qui représente le numéro d&rsquo;enregistrement courant. <code>NR</code> incrémente de 1 pour chaque ligne lue à partir du fichier ou des fichiers d&rsquo;entrée.</p><p>Si vous souhaitez imprimer des numéros de ligne en plus du contenu de la ligne, vous pouvez utiliser ce qui suit :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-awk data-lang=awk><span style=display:flex><span><span style=color:#a6e22e>awk</span> <span style=color:#e6db74>&#39;{print NR, $0}&#39;</span> <span style=color:#a6e22e>example</span>.<span style=color:#a6e22e>txt</span></span></span></code></pre></div><h3 id=exercice-pratique-1--analyse-des-journaux-daccès-apache>Exercice pratique 1 : analyse des journaux d&rsquo;accès Apache <a aria-label=#exercice-pratique-1--analyse-des-journaux-daccès-apache href=#exercice-pratique-1--analyse-des-journaux-daccès-apache class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h3><p>Passez du temps à jouer avec les commandes awk suivantes. Vous pouvez utiliser un journal à partir de votre propre serveur Web ou utiliser des journaux d&rsquo;exercice, telles que <a href=https://github.com/OpenInternet/Infuse/blob/main/learner-assets/nginx%20and%20apache%20logs.zip target=_blank>cette collection</a>.</p><p>Indiquez le nombre total de requêtes enregistrées dans le journal d&rsquo;accès.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat apache_access.log | wc -l</span></span></code></pre></div><p>Déterminez les URL les plus fréquemment demandées.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{print $7}&#39;</span> apache_access.log | sort | uniq -c | sort -nr | head -5</span></span></code></pre></div><p>Cette commande <code>awk</code> imprimera la septième colonne de chaque ligne du journal, puis acheminera le résultat de la commande awk précédente dans la commande de tri. La commande sort est utilisée pour trier les lignes de texte par ordre alphabétique ou numérique. Par défaut, la commande effectue le tri par ordre croissant. Après avoir trié le résultat avec la commande sort, la commande <code>uniq -c</code> est utilisée pour compter les occurrences de chaque ligne unique dans le résultat trié. La commande <code>sort -nr</code> est utilisée pour trier le résultat numériquement (-n) dans l&rsquo;ordre inverse (-r). Cela signifie que les lignes sont triées en fonction de leurs valeurs numériques, les valeurs les plus élevées apparaissant en premier. La commande <code>head -5</code> est utilisée pour afficher les 5 premières lignes de l&rsquo;entrée.</p><p>Découvrez les 5 principales adresses IP faisant des requêtes au serveur.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{print $1}&#39;</span> apache_access.log | sort | uniq -c | sort -nr | head -5</span></span></code></pre></div><p>Analysez la distribution des méthodes de requête.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{print $6}&#39;</span> apache_access.log | sort | uniq -c</span></span></code></pre></div><h3 id=exercice-pratique-2--analyse-des-journaux-daccès-nginx>Exercice pratique 2 : analyse des journaux d&rsquo;accès Nginx <a aria-label=#exercice-pratique-2--analyse-des-journaux-daccès-nginx href=#exercice-pratique-2--analyse-des-journaux-daccès-nginx class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h3><p>Comptez le nombre total de requêtes dans un journal d&rsquo;accès Nginx.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat nginx_access.log | wc -l</span></span></code></pre></div><p>Identifiez les URL les plus demandées et leurs codes de statut correspondants.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{print $7, $9}&#39;</span> nginx_access.log | sort | uniq -c | sort -nr | head -5</span></span></code></pre></div><p>Calculez la taille moyenne des requêtes (en octets).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-awk data-lang=awk><span style=display:flex><span><span style=color:#a6e22e>awk</span> <span style=color:#e6db74>&#39;{sum+=$10} END {print &#34;Average request size:&#34;, sum/NR, &#34;bytes&#34;}&#39;</span> <span style=color:#a6e22e>nginx_access</span>.<span style=color:#66d9ef>log</span></span></span></code></pre></div><p>Cette commande <code>awk</code> calcule la taille moyenne des requêtes en additionnant les valeurs de la 10e colonne (représentant probablement les tailles des requêtes) pour toutes les lignes du fichier <code>nginx_access.log</code>. Ensuite, elle divise la somme totale par le nombre de lignes (NR), représentant la taille moyenne de la requête en octets. Enfin, elle imprime le résultat avec un message descriptif.</p><p>Assurez-vous que la 10e colonne représente réellement la taille de la requête en octets dans votre fichier <code>nginx_access.log</code>, car l&rsquo;exactitude du calcul dépend de l&rsquo;exactitude de l&rsquo;indexation des colonnes.</p><p>Déterminez les 5 principaux agents utilisateurs accédant au serveur.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>awk -F<span style=color:#e6db74>&#39;&#34;&#39;</span> <span style=color:#e6db74>&#39;{print $6}&#39;</span> nginx_access.log | sort | uniq -c | sort -nr | head -5</span></span></code></pre></div><p>Cette commande utilise <code>awk</code> pour définir le séparateur de champs (-F) à guillemets doubles ("), puis extrait le 6e champ de chaque ligne du fichier <code>nginx_access.log</code>. Cela suppose que les entrées du journal sont formatées de telle manière que l&rsquo;URL ou le chemin de requête est inclus dans des guillemets doubles. Les URL extraites ou les chemins de requête sont ensuite filtrés pour les trier par ordre alphabétique. <code>uniq -c</code> est utilisé pour compter les occurrences de chaque URL ou chemin de requête unique. Le résultat est à nouveau canalisé avec <code>sort -nr</code> pour trier les résultats numériquement en ordre décroissant en fonction du nombre.</p><p>Enfin, <code>head -5</code> est utilisé pour afficher les 5 URL ou chemins de requête les plus fréquents.</p><p>Analysez la répartition des requêtes par heure de la journée.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>awk <span style=color:#e6db74>&#39;{print $4}&#39;</span> nginx_access.log | cut -c 14-15 | sort | uniq -c</span></span></code></pre></div><p>La commande <code>awk</code> est utilisée pour extraire le 4e champ ($4) de chaque ligne du fichier <code>access.log</code>, qui contient généralement l&rsquo;horodatage.</p><p>La commande <code>cut</code> est ensuite appliquée pour extraire les caractères 14 à 15 de chaque horodatage, qui correspondent à la portion de l&rsquo;heure.</p><p>Les valeurs de l&rsquo;heure extraites sont canalisées pour les trier afin de les classer par ordre croissant. <code>uniq -c</code> est utilisé pour compter les occurrences de chaque valeur d&rsquo;heure unique.</p><p>Le résultat affiche le nombre d&rsquo;entrées de journal pour chaque heure dans le fichier journal.</p><h3 id=exercice-pratique-3--analyse-du-journal-des-erreurs-apache-et-nginx>Exercice pratique 3 : analyse du journal des erreurs (Apache et Nginx) <a aria-label=#exercice-pratique-3--analyse-du-journal-des-erreurs-apache-et-nginx href=#exercice-pratique-3--analyse-du-journal-des-erreurs-apache-et-nginx class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h3><ol><li>Apache et nginx : Comptez le nombre total d&rsquo;entrées d&rsquo;erreur dans le journal.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat apache_error.log | grep <span style=color:#e6db74>&#39;error&#39;</span> | wc -l
</span></span><span style=display:flex><span>cat nginx_error.log | grep <span style=color:#e6db74>&#39;error&#39;</span> | wc -l</span></span></code></pre></div><ol start=2><li>Apache : Identifiez les types d&rsquo;erreurs les plus courants. <code>awk '{print $NF}'</code> lit chaque ligne de données de l&rsquo;entrée, la divise en champs (séparés par des espaces par défaut), puis imprime la valeur du dernier champ de chaque ligne.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat apache_error.log | grep <span style=color:#e6db74>&#39;error&#39;</span> | awk <span style=color:#e6db74>&#39;{print $NF}&#39;</span> | sort | uniq -c | sort -nr | head -5</span></span></code></pre></div><p>Le nombre au début de chaque ligne indique combien de fois une erreur particulière s&rsquo;est produite dans le journal. Dans ce cas, &ldquo;<code>2047</code>&rdquo; signifie que l&rsquo;erreur avec le dernier champ &ldquo;<code>757</code>&rdquo; s&rsquo;est produite 2047 fois.</p><p>Le dernier champ représente différentes choses dans chaque ligne. Il pourrait s&rsquo;agir d&rsquo;un chemin de fichier, d&rsquo;une action spécifique ou d&rsquo;un autre identifiant lié à l&rsquo;erreur. Par exemple, &ldquo;<code>757</code>&rdquo; ou &ldquo;<code>154</code>&rdquo; pourraient être des codes d&rsquo;erreur ou des identifiants uniques, tandis que &ldquo;<code>/home/mysite/public_html/new/wp-content/plugins/woocommerce/includes/data-stores/abstract-wc-order-data-store-cpt.php:100</code>&rdquo; pourrait être un chemin de fichier et un numéro de ligne où l&rsquo;erreur s&rsquo;est produite.</p><ol start=3><li>nginx : Déterminez les 5 principales adresses IP qui génèrent des erreurs.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat nginx_error.log | grep <span style=color:#e6db74>&#39;error&#39;</span> | awk <span style=color:#e6db74>&#39;{print $NF}&#39;</span> | sort | uniq -c | sort -nr | head -5</span></span></code></pre></div><ol start=4><li>Apache : Analysez la distribution des erreurs par date ou heure.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat apache_error.log | grep <span style=color:#e6db74>&#39;error&#39;</span> | awk <span style=color:#e6db74>&#39;{print $1}&#39;</span> | sort | uniq -c</span></span></code></pre></div><ol start=5><li>Apache : Examinez les erreurs récurrentes et proposez des solutions potentielles. {$1=""; $2=""; $3="";} : cette partie de la commande awk définit les trois premiers champs (date, heure et informations de fuseau horaire) sur des chaînes vides.</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cat apache_error.log | grep <span style=color:#e6db74>&#39;error&#39;</span> | awk <span style=color:#e6db74>&#39;{$1=&#34;&#34;; $2=&#34;&#34;; $3=&#34;&#34;; print}&#39;</span> | sort | uniq -c | sort -nr | head -10</span></span></code></pre></div><h3 id=une-introduction-aux-expressions-rationnelles-et-leur-utilisation-pour-analyser-un-journal>Une introduction aux expressions rationnelles et leur utilisation pour analyser un journal <a aria-label=#une-introduction-aux-expressions-rationnelles-et-leur-utilisation-pour-analyser-un-journal href=#une-introduction-aux-expressions-rationnelles-et-leur-utilisation-pour-analyser-un-journal class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h3><p>Pour cet exercice, nous utilisons des fichiers journaux de <a href=https://github.com/OpenInternet/Infuse/blob/main/learner-assets/nginx%20and%20apache%20logs.zip target=_blank>cette collection</a> (même collection que les autres fichiers de cette section d&rsquo;exercice)</p><p>Dans cette tâche, nous allons utiliser des expressions régulières. Les expressions régulières (regex) sont de puissants outils de recherche qui vous aident à trouver des modèles spécifiques dans les données. Par exemple, si vous enquêtez sur un trafic réseau suspect et que vous savez que les requêtes malveillantes contiennent souvent certains modèles de caractères, vous pouvez utiliser regex pour rechercher dans les journaux ou les captures de trafic pour trouver ces requêtes. Regex vous permet de définir des modèles de recherche flexibles. Par exemple :</p><p><strong>[a-z] range</strong> - Correspond à un caractère dans la plage « a » à « z ». Sensible à la casse.</p><p>Par ex., [g-s] correspond à un caractère compris entre « g » et « s »</p><p>abcdef<strong>ghijklmnopqrs</strong>tuvwxyz</p><p><strong>[A-Z] range</strong> - Correspond à un caractère dans la plage « A » à « Z ». Sensible à la casse.</p><p><strong>[0-9] range</strong> - Correspond à un caractère dans la plage « 0 » à « 9 ». Sensible à la casse.</p><p>Nous pouvons également utiliser des <strong>quantificateurs</strong> pour correspondre à la quantité spécifiée du jeton précédent. {1,3} correspondra à 1 à 3. {3} correspondra exactement à 3. {3,} correspondra à 3 ou plus.</p><p>[a-d]{3} correspond à n&rsquo;importe quelle séquence de trois caractères exactement dans la plage donnée, chacun pouvant être une lettre minuscule de « a » à « d ». Donc, cela correspondrait à des chaînes comme « abc », « bda », « cad », etc.</p><p>Certains caractères ont une signification particulière dans les regex :</p><table><thead><tr><th>Symbole</th><th>Nom</th><th>Description</th></tr></thead><tbody><tr><td>\</td><td>Barre oblique inversée</td><td>Utilisé pour échapper (faire passer) un caractère spécial</td></tr><tr><td>^</td><td>Accent circonflexe</td><td>Début d&rsquo;une chaîne</td></tr><tr><td>$</td><td>Signe dollar</td><td>Fin d&rsquo;une chaîne</td></tr><tr><td>.</td><td>Point</td><td>Correspond à n&rsquo;importe quel caractère unique</td></tr><tr><td>|</td><td>Barre verticale ou pipe</td><td>Correspond au caractère/groupe précédent OU suivant</td></tr><tr><td>?</td><td>Point d&rsquo;interrogation</td><td>Correspond à zéro ou un du précédent</td></tr><tr><td>*</td><td>Astérisque ou étoile</td><td>Correspond à zéro, un ou plusieurs du précédent</td></tr><tr><td>+</td><td>Signe plus</td><td>Correspond à un ou plusieurs du précédent</td></tr><tr><td>( )</td><td>Parenthèses ouvrantes et fermantes</td><td>Regroupe des caractères</td></tr><tr><td>[ ]</td><td>Crochets ouvrants et fermants</td><td>Correspond à une plage de caractères</td></tr><tr><td>{ }</td><td>Accolades ouvrantes et fermantes</td><td>Correspond à un nombre spécifié d&rsquo;occurrences du précédent</td></tr></tbody></table><p>Dans notre tâche, nous utiliserons la barre oblique inverse pour faire passer des caractères spéciaux.</p><p>Pour en savoir plus sur les regex : <a href=https://en.wikipedia.org/wiki/Regular_expression target=_blank>https://fr.wikipedia.org/wiki/Expression_r%C3%A9guli%C3%A8re</a></p><p>Si vous vérifiez le journal d&rsquo;accès nginx fourni, vous pouvez voir ces types de lignes :</p><pre tabindex=0><code>181.214.166.113 - - [15/Feb/2024:15:05:19 -0500] &#34;[L\x9E\x804\xD9-\xFB&amp;\xA3\x1F\x9C\x19\x95\x12\x8F\x0C\x89\x05\x81&#34; 400 181 &#34;-&#34; &#34;-&#34;
45.95.169.184 - - [15/Feb/2024:15:49:27 -0500] &#34;\x10 \x00\x00BBBB\xBA\x8C\xC1\xABDAAA&#34; 400 181 &#34;-&#34; &#34;-&#34;
</code></pre><p>Comme vous pouvez le voir, les deux lignes contiennent <code>\x</code> suivi exactement de deux caractères qui correspondent à la notation hexadécimale (ils utilisent donc les chiffres 0-9 et les lettres A à F), comme \x9C, \x10, \xBA, etc. Pour filtrer toutes les lignes, nous devons utiliser le modèle &lsquo;<code>\\x[a-fA-F0-9]{3}</code>&rsquo; où <code>\\x[a-fA-F0-9]</code> est notre jeton, <code>{3}</code> est un quantificateur.</p><p>Nous utiliserons la commande <code>grep</code> pour rechercher le motif spécifié dans le texte. Par exemple :</p><p><code>grep 'abcd'</code> filtrera toutes les lignes contenant la chaîne « abcd ».</p><p>L&rsquo;option « <code>-E</code> » de la commande <code>grep</code> permet d&rsquo;utiliser des expressions régulières étendues pour la correspondance de modèle <code>grep -E 'abcd\\[0-9]{2}'</code> pour le filtrage de texte comme <code>abcd\34, abcd\47</code>, etc.</p><h4 id=exercice-pratique-4--utiliser-des-expressions-régulières-regex>Exercice pratique 4 : utiliser des expressions régulières (regex) <a aria-label=#exercice-pratique-4--utiliser-des-expressions-régulières-regex href=#exercice-pratique-4--utiliser-des-expressions-régulières-regex class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h4><p>Pour ces exercices, nous utilisons les fichiers journaux nginx de <a href=https://github.com/OpenInternet/Infuse/blob/main/learner-assets/web-app-hardening-skill-check.log target=_blank>cette collection</a> (même collection que les autres fichiers de cette section d&rsquo;exercice)</p><ol><li>Utilisez grep et l&rsquo;expression régulière <code>'\\x[a-fA-F0-9]{32}'</code> <a href=https://en.wikipedia.org/wiki/Regular_expression target=_blank>regex</a> pour filtrer les requêtes de nginx access.log contenant une charge utile suspecte. L&rsquo;expression régulière <code>'\x[a-fA-F0-9]{3}'</code> correspond à une séquence commençant par &lsquo;<code>\x</code>&rsquo; suivie exactement de trois caractères hexadécimaux (0-9, a-f, ou A-F). Combien y a-t-il de lignes ?</li></ol><details class="group mb-6 w-full rounded-lg p-6 transition open:bg-white open:shadow-lg open:ring-1 open:ring-black/5"><summary class="flex cursor-pointer list-none items-center justify-between font-medium"><span class=text-gray-900>Réponse</span>
<span class="transition group-open:hidden"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"><path d="M12.5 8.31055V16.3105m-4-4h8m6 0c0 5.5229-4.4772 10-10 10-5.52285.0-10-4.4771-10-10 0-5.5228 4.47715-9.99995 10-9.99995 5.5228.0 10 4.47715 10 9.99995z" stroke="#98a2b3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
</span><span class="hidden transition group-open:block"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"><path d="M8.5 12.3105h8m6 0c0 5.5229-4.4772 10-10 10-5.52285.0-10-4.4771-10-10 0-5.5228 4.47715-9.99995 10-9.99995 5.5228.0 10 4.47715 10 9.99995z" stroke="#98a2b3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></summary><div class="break-words pe-6 pt-4"><p>Bonne réponse : 131 lignes</p><p>Commande(s) à exécuter : <code>grep -E '\\x[a-fA-F0-9]{3}' nginx_access.log|wc|awk '{print $1}'</code></p></div></details><ol start=2><li>En utilisant le même filtre, déterminez quelle adresse IP fait le plus de requêtes</li></ol><details class="group mb-6 w-full rounded-lg p-6 transition open:bg-white open:shadow-lg open:ring-1 open:ring-black/5"><summary class="flex cursor-pointer list-none items-center justify-between font-medium"><span class=text-gray-900>Réponse</span>
<span class="transition group-open:hidden"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"><path d="M12.5 8.31055V16.3105m-4-4h8m6 0c0 5.5229-4.4772 10-10 10-5.52285.0-10-4.4771-10-10 0-5.5228 4.47715-9.99995 10-9.99995 5.5228.0 10 4.47715 10 9.99995z" stroke="#98a2b3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
</span><span class="hidden transition group-open:block"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"><path d="M8.5 12.3105h8m6 0c0 5.5229-4.4772 10-10 10-5.52285.0-10-4.4771-10-10 0-5.5228 4.47715-9.99995 10-9.99995 5.5228.0 10 4.47715 10 9.99995z" stroke="#98a2b3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></summary><div class="break-words pe-6 pt-4"><p>Bonne réponse : 222.186.13.131 19 lignes</p><p>Commande(s) à exécuter : <code>grep -E '\\x[a-fA-F0-9]{3}' nginx_access.log|sort|awk '{print $1}'| sort | uniq -c | sort -nr</code></p></div></details><ol start=3><li>Examinez <code>error.log</code> en exécutant <code>more error.log</code>. Vous pouvez quitter cette commande avec ctrl+c ou appuyer sur la touche « q » pour retourner à l&rsquo;invite de commande. Exclusion des erreurs « PHP Notice ». Quels types d&rsquo;erreurs critiques pouvez-vous trouver dans le journal ?</li></ol><details class="group mb-6 w-full rounded-lg p-6 transition open:bg-white open:shadow-lg open:ring-1 open:ring-black/5"><summary class="flex cursor-pointer list-none items-center justify-between font-medium"><span class=text-gray-900>Réponse</span>
<span class="transition group-open:hidden"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"><path d="M12.5 8.31055V16.3105m-4-4h8m6 0c0 5.5229-4.4772 10-10 10-5.52285.0-10-4.4771-10-10 0-5.5228 4.47715-9.99995 10-9.99995 5.5228.0 10 4.47715 10 9.99995z" stroke="#98a2b3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
</span><span class="hidden transition group-open:block"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"><path d="M8.5 12.3105h8m6 0c0 5.5229-4.4772 10-10 10-5.52285.0-10-4.4771-10-10 0-5.5228 4.47715-9.99995 10-9.99995 5.5228.0 10 4.47715 10 9.99995z" stroke="#98a2b3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></summary><div class="break-words pe-6 pt-4"><p>Bonne réponse : erreur d&rsquo;établissement de liaison SSL</p><p>Commande(s) à exécuter :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>more nginx_error.log
</span></span><span style=display:flex><span>cat nginx_error.log|grep -v <span style=color:#e6db74>&#34;PHP&#34;</span>|grep crit</span></span></code></pre></div></div></details><ol start=4><li>Excluez les erreurs PHP du fichier error.log et trouvez les lignes où les requêtes sont refusées en raison des règles de sécurité. Quel fichier sensible a été demandé ?</li></ol><details class="group mb-6 w-full rounded-lg p-6 transition open:bg-white open:shadow-lg open:ring-1 open:ring-black/5"><summary class="flex cursor-pointer list-none items-center justify-between font-medium"><span class=text-gray-900>Réponse</span>
<span class="transition group-open:hidden"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"><path d="M12.5 8.31055V16.3105m-4-4h8m6 0c0 5.5229-4.4772 10-10 10-5.52285.0-10-4.4771-10-10 0-5.5228 4.47715-9.99995 10-9.99995 5.5228.0 10 4.47715 10 9.99995z" stroke="#98a2b3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
</span><span class="hidden transition group-open:block"><svg width="25" height="25" viewBox="0 0 25 25" fill="none"><path d="M8.5 12.3105h8m6 0c0 5.5229-4.4772 10-10 10-5.52285.0-10-4.4771-10-10 0-5.5228 4.47715-9.99995 10-9.99995 5.5228.0 10 4.47715 10 9.99995z" stroke="#98a2b3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg></span></summary><div class="break-words pe-6 pt-4"><p>Bonne réponse : <code>.git/config</code></p><p>Commande(s) à exécuter : <code>cat nginx_error.log|grep -v "PHP"|grep forbidden</code></p></div></details><h2 id=contrôle-de-compétence>Contrôle de compétence <a aria-label=#contrôle-de-compétence href=#contrôle-de-compétence class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h2><p>Ce contrôle de compétences sera beaucoup plus facile si vous avez d&rsquo;abord terminé l&rsquo;exercice ci-dessus.</p><p>Vous recevez un journal d&rsquo;accès nginx à partir d&rsquo;un site Web attaqué que devez examiner, que vous pouvez <svg viewBox="0 0 512 512" class="inline-block ms-1 h-4 w-4"><path fill="currentcolor" aria-hidden="true" d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32v242.7l-73.4-73.4c-12.5-12.5-32.8-12.5-45.3.0s-12.5 32.8.0 45.3l128 128c12.5 12.5 32.8 12.5 45.3.0l128-128c12.5-12.5 12.5-32.8.0-45.3s-32.8-12.5-45.3.0L288 274.7V32zM64 352c-35.3.0-64 28.7-64 64v32c0 35.3 28.7 64 64 64h384c35.3.0 64-28.7 64-64v-32c0-35.3-28.7-64-64-64H346.5l-45.3 45.3c-25 25-65.5 25-90.5.0L165.5 352H64zm368 56a24 24 0 110 48 24 24 0 110-48z"/></svg> <a href=https://github.com/OpenInternet/Infuse/blob/main/learner-assets/web-app-hardening-skill-check.log target=_blank>télécharger ici</a>.</p><p>Localisez un chemin d&rsquo;accès suspect qui est ciblé, extrayez les adresses IP qui envoient des requêtes suspectes et découvrez dans quels pays se trouvent ces adresses IP (vous pouvez utiliser les bases de données geoIP décrites plus en détail dans le parcours d&rsquo;apprentissage sur les infrastructures malveillantes). Vous pouvez utiliser des outils CLI standard comme awk, grep, sort et uniq. Pour connaître les numéros AS et les pays, nous vous recommandons d&rsquo;utiliser les services de recherche en ligne appropriés.</p><p><em>Conseil :</em> ipinfo.io fournit un moyen pratique de rechercher les détails des adresses IP, vous pouvez utiliser curl pour les récupérer.</p><h2 id=ressources-dapprentissage>Ressources d&rsquo;apprentissage <a aria-label=#ressources-dapprentissage href=#ressources-dapprentissage class="anchor-link no-underline"><svg aria-hidden="true" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a></h2><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Fichiers journaux - Apache</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Aperçu de la lecture des fichiers journaux dans le serveur Web Apache</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://httpd.apache.org/docs/2.4/logs.html#accesslog target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Comprendre le journal d'accès et d'erreurs Apache, Ressource 1</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Deux autres articles sur la façon de lire les journaux du serveur Web Apache</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://www.keycdn.com/support/apache-access-log target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Comprendre le journal d'accès et d'erreurs Apache, Ressource 2</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Deux autres articles sur la façon de lire les journaux du serveur Web Apache</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://www.dataset.com/blog/apache-error-log-detail/ target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Journalisation côté serveur</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Une analyse des journaux dans le serveur Microsoft IIS</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://learn.microsoft.com/fr-fr/windows/win32/http/server-side-logging-in-http-version-2-0 target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Journaux d'erreurs IIS et autres moyens de trouver les requêtes ASP.Net ayant échoué</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Un autre regard sur les journaux IIS et comment nous pouvons rechercher des erreurs d&rsquo;application</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://stackify.com/beyond-iis-logs-find-failed-iis-asp-net-requests/ target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Configuration de la journalisation sur nginx</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Documentation par le serveur web NGINX sur la façon de configurer et de travailler avec les journaux</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://docs.nginx.com/nginx/admin-guide/monitoring/logging/ target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Un guide des journaux NGINX</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Un aperçu des différents journaux NGINX et de leurs formats</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://trunc.org/learning/nginx-log-analysis target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Journal de sécurité : meilleures pratiques de journalisation et de gestion</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Une analyse des moments où les journaux sont utiles, comment nous pouvons les analyser et quelles politiques nous pouvons créer autour d&rsquo;eux</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://www.dnsstuff.com/security-log-best-practices target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Aide-mémoire et vocabulaire de l'OWASP sur la journalisation, Ressource 1</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Un guide de l&rsquo;OWASP sur l&rsquo;utilité des journaux et sur la façon dont nous devrions les analyser ainsi qu&rsquo;un vocabulaire standard à leur sujet</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://cheatsheetseries.owasp.org/cheatsheets/Logging_Cheat_Sheet.html target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Aide-mémoire et vocabulaire de l'OWASP sur la journalisation, Ressource 2</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Un guide de l&rsquo;OWASP sur l&rsquo;utilité des journaux et sur la façon dont nous devrions les analyser ainsi qu&rsquo;un vocabulaire standard à leur sujet</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://cheatsheetseries.owasp.org/cheatsheets/Logging_Vocabulary_Cheat_Sheet.html target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div><div class="transition-200 relative mb-6 flex w-full items-center space-x-3 rounded-3xl border-2 border-gray-300 bg-white p-4 shadow-3xl transition-shadow focus-within:shadow-none focus-within:ring-2 focus-within:ring-green-500 focus-within:ring-offset-2 hover:border-gray-400 hover:shadow-none"><div class=p-6><p class="mb-2 mt-0 text-2xl font-bold">Gardez les données sensibles hors de vos journaux : 9 meilleures pratiques</p><span class="mb-2 me-2 inline-block rounded-full border-2 border-indigo-300 bg-indigo-50 px-2 py-0 text-sm font-semibold text-indigo-700">Gratuit</span><p class="mb-3 mt-0">Une journalisation approfondie peut également inclure des données sensibles, ce qui pourrait exposer les utilisateurs à des risques. Ce guide examine comment nous pouvons adapter nos pratiques de journalisation pour exclure les données sensibles des journaux.</p><div class=mb-2><span class="text-sm font-semibold">Langues</span>: <span class="mb-0 inline-block text-sm">Anglais</span></div><a href=https://www.skyflow.com/post/how-to-keep-sensitive-data-out-of-your-logs-nine-best-practices target=_blank rel="noopener noreferrer" class="mt-2 inline-block rounded-lg bg-green-700 px-4 py-2 font-bold text-white no-underline visited:!text-white hover:bg-green-800">Visitez le site</a></div></div></div><div class="absolute -left-64 mt-8 hidden h-full xl:block xl:max-w-64 2xl:-left-96 2xl:max-w-full"><div class=h-full><div class="sticky top-0 px-4 py-2"><h2 class="mb-4 mt-3 text-xl font-bold">Table des matières</h2><div class="toc-container toc-scrollbar h-svh max-w-72 space-y-2 overflow-y-auto"><nav id=TableOfContents><ul><li><a href=#cas-dutilisation>Cas d&rsquo;utilisation</a></li><li><a href=#objectifs>Objectifs</a></li><li><a href=#section-principale>Section Principale</a><ul><li><a href=#la-journalisation-intégrée>La journalisation intégrée</a><ul><li><a href=#apache>Apache</a></li><li><a href=#iis>IIS</a></li><li><a href=#nginx>nginx</a></li><li><a href=#journaux-cdn-en-amont>Journaux CDN en amont</a></li><li><a href=#configuration-de-la-journalisation-du-serveur>Configuration de la journalisation du serveur</a></li><li><a href=#limitations-de-la-journalisation-du-serveur>Limitations de la journalisation du serveur</a></li><li><a href=#approche-de-la-journalisation-pour-la-sécurité>Approche de la journalisation pour la sécurité</a></li><li><a href=#journalisation-et-informations-sensibles>Journalisation et informations sensibles</a></li></ul></li></ul></li><li><a href=#exercice-pratique>Exercice pratique</a><ul><li><a href=#une-brève-introduction-aux-outils-danalyse-de-texte-unix>Une brève introduction aux outils d&rsquo;analyse de texte Unix</a></li><li><a href=#exercice-pratique-1--analyse-des-journaux-daccès-apache>Exercice pratique 1 : analyse des journaux d&rsquo;accès Apache</a></li><li><a href=#exercice-pratique-2--analyse-des-journaux-daccès-nginx>Exercice pratique 2 : analyse des journaux d&rsquo;accès Nginx</a></li><li><a href=#exercice-pratique-3--analyse-du-journal-des-erreurs-apache-et-nginx>Exercice pratique 3 : analyse du journal des erreurs (Apache et Nginx)</a></li><li><a href=#une-introduction-aux-expressions-rationnelles-et-leur-utilisation-pour-analyser-un-journal>Une introduction aux expressions rationnelles et leur utilisation pour analyser un journal</a><ul><li><a href=#exercice-pratique-4--utiliser-des-expressions-régulières-regex>Exercice pratique 4 : utiliser des expressions régulières (regex)</a></li></ul></li></ul></li><li><a href=#contrôle-de-compétence>Contrôle de compétence</a></li><li><a href=#ressources-dapprentissage>Ressources d&rsquo;apprentissage</a></li></ul></nav></div></div></div></div></article><script>document.addEventListener("DOMContentLoaded",function(){const o=document.querySelectorAll("#TableOfContents a"),e=Array.from(o),n=e.map(e=>{const t=e.getAttribute("href").slice(1);return document.getElementById(t)});let t=!1;function s(){if(t)return;const o=window.scrollY+window.innerHeight/2;let s=-1;for(let e=0;e<n.length;e++){const t=n[e];if(t&&t.getBoundingClientRect().top+window.scrollY<=o)s=e;else break}if(e.forEach(e=>e.classList.remove("active-element")),s!==-1){e[s].classList.add("active-element");const t=document.querySelector(".toc-container");if(t){const n=e[s],o=n.getBoundingClientRect(),i=t.getBoundingClientRect(),a=o.top-i.top-t.clientHeight/2+n.clientHeight/2;t.scrollTop=a}}}function i(e,t){let n;return function(...s){clearTimeout(n),n=setTimeout(()=>e.apply(this,s),t)}}e.forEach(n=>{n.addEventListener("click",function(s){const i=n.getAttribute("href").slice(1),o=document.getElementById(i);o&&(s.preventDefault(),t=!0,o.scrollIntoView({behavior:"auto",block:"start"}),e.forEach(e=>e.classList.remove("active-element")),n.classList.add("active-element"),setTimeout(()=>t=!1,200))})}),window.addEventListener("scroll",i(()=>{s()},100)),s()})</script><section id=mark-complete class="hidden w-full flex-col items-start justify-between"><div class="mx-auto w-full rounded-xl border border-green-400 bg-white shadow-lg"><div class="overflow-hidden rounded-t-xl"><div class="bg-green-100 px-10 py-3"><p class="m-0 text-lg font-semibold text-green-700">Félicitations pour avoir terminé
Module 2!</p></div></div><div class="px-10 py-4"><p class="text-md mb-4 mt-0 text-gray-700">Cochez la case pour confirmer votre achèvement et continuez vers le module suivant.</p><div class="relative mb-4 flex w-full items-center gap-x-2 space-x-1 rounded-xl border-2 border-gray-200 bg-gray-50 px-4 py-3"><div class="flex h-6 items-center"><input id="Journalisation du site Web pour la sécuritéCheckbox" aria-describedby=checkbox-description name=checkbox type=checkbox class="h-4 w-4 rounded border-gray-300 text-green-700 focus:ring-green-700"></div><div class="w-full text-sm"><label for="Journalisation du site Web pour la sécuritéCheckbox" class="block cursor-pointer font-medium text-gray-900">Marquer le module comme terminé</label><p id=checkbox-description class="sr-only text-gray-500">Marque le module actuel comme terminé et enregistre la progression de l'utilisateur.</p></div></div></div></div></section><nav class="flex w-full items-center justify-between px-4 pt-6 sm:px-6" aria-label=Pagination><a href=https://infuse.quest/fr/learning-path/6/module-1/ class="relative flex items-center justify-start rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 no-underline ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus-visible:outline-offset-0"><span class="flex items-center"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="me-2 size-4" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 010 12h-3"/></svg>
Module précédent</span>
</a><a href=https://infuse.quest/fr/learning-path/6/module-3/ class="relative flex items-center justify-end rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 no-underline ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus-visible:outline-offset-0"><span class="flex items-center">Module suivant<svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="ms-2 size-4" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="m15 15 6-6m0 0-6-6m6 6H9a6 6 0 000 12h3"/></svg></span></a></nav><span class=hidden id=moduleCount data-count=5></span>
<script>window.addEventListener("beforeprint",()=>{document.querySelectorAll("details").forEach(e=>{e.open=!0})}),document.getElementById("printButton").addEventListener("click",function(){window.print()})</script><div id=congratulationsModal x-data x-cloak><div @keydown.window.escape="$store.modal.open = false" x-show=$store.modal.open @click.away="$store.modal.open = false" x-transition:enter="ease-out duration-300" x-transition:enter-start=opacity-0 x-transition:enter-end=opacity-100 x-transition:leave="ease-in duration-200" x-transition:leave-start=opacity-100 x-transition:leave-end=opacity-0 class="fixed inset-0 z-10 flex items-center justify-center overflow-y-auto" aria-labelledby=modal-title role=dialog aria-modal=true><div class="fixed inset-0 bg-gray-200 bg-opacity-75 transition-opacity" aria-hidden=true></div><div class="fixed inset-0 z-10 w-screen overflow-y-auto"><div class="flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"><div class="relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6"><div class="absolute right-0 top-0 hidden pe-4 pt-4 sm:block"><button @click="$store.modal.open = false" type=button class="rounded-md bg-white text-gray-500 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-green-700 focus:ring-offset-2">
<span class=sr-only>Fermer</span><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/></svg></button></div><div><div class="mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-green-100 text-7xl">🎉</div><div class="mt-3 text-center sm:mt-5"><h3 class="mb-1 text-2xl font-semibold text-gray-900" id=modal-title>Félicitations!</h3><p class="text-sm text-gray-600">Vous avez complété tous les modules de ce parcours d'apprentissage.</p></div></div><div class="mt-5 sm:mt-6"><a href=https://infuse.quest/fr/badges class="inline-flex w-full justify-center rounded-md bg-green-700 px-3 py-2 text-sm font-semibold text-white no-underline shadow-sm hover:bg-green-800 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-800">Obtenez le badge!</a></div></div></div></div></div></div><span id=moduleId class=hidden>/6/module-2</span>
<script>document.addEventListener("DOMContentLoaded",function(){Alpine.store("modal",{open:!1});const n=document.getElementById("moduleId").innerHTML,s=document.getElementById("Journalisation du site Web pour la sécuritéCheckbox"),t=localStorage.getItem("loggedInUser"),o=localStorage.getItem(t),e=o?JSON.parse(o):{},i=e[n]===!0;s.checked=i,s.addEventListener("change",function(){e[n]=this.checked,localStorage.setItem(t,JSON.stringify(e)),a()});function a(){const s=window.location.pathname.split("/"),o="/"+s[s.length-3];let n=0,i=parseInt(document.getElementById("moduleCount").getAttribute("data-count"));for(let[t,s]of Object.entries(e))t.startsWith(o)&&s===!0&&n++;const a=Math.round(n/i*100),r=`progress_${o}`;e[r]=a,localStorage.setItem(t,JSON.stringify(e)),n===i&&(Alpine.store("modal").open=!0)}})</script><script>document.addEventListener("alpine:init",()=>{Alpine.store("modal",{open:!1})})</script></section></div></main><footer class="mx-auto w-full max-w-7xl bg-white p-6 md:flex md:items-center md:justify-between lg:px-8"><div class="flex flex-col gap-x-12 md:flex-row md:items-center"><a href=https://infuse.quest/fr/ class="-m-1.5 mb-4 p-1.5 md:mb-0"><span class=sr-only>Infuse</span>
<img class="h-8 w-auto" src=https://infuse.quest/media/images/infuse-logo.svg alt="Infuse logo"></a><div class="mb-4 flex md:mb-0 lg:gap-x-12"><div class="flex flex-col gap-y-2 md:flex-row md:gap-x-6"><a href=https://infuse.quest/fr/about/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false>À propos d'Infuse</a>
<a href=https://infuse.quest/fr/how/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false>Comment ça marche</a>
<a href=https://infuse.quest/fr/contribute/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false>Contribuer</a>
<a href=https://infuse.quest/fr/community/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false>Community</a>
<a href=https://infuse.quest/fr/badge-descriptions/ class="inline-flex items-center text-sm font-semibold text-gray-700 hover:text-gray-900 hover:underline" aria-current=false></a></div></div></div><p class="text-sm text-gray-500">&copy; 2024 Infuse. Disponibles sous <a href=https://creativecommons.org/licenses/by-sa/4.0/>CC BY-SA</a></p></footer><script src=https://infuse.quest/bundle.min.5b3980201140b36d2d3323300f7f20d4e4a520d4c5feca83f7e8aae2d5e3a627.js integrity="sha256-WzmAIBFAs20tMyMwD38g1OSlINTF/sqD9+iq4tXjpic="></script><script type=module defer src=https://infuse.quest/instant.min.js></script><script src=https://infuse.quest/clean-insights.min.js defer></script><script>document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("trackingConsent");if(e==="granted"){const e=CleanInsightsAutoTracker("https://metrics.cleaninsights.org/cleaninsights.php",34);e.grantCampaign("visits"),e.grantFeature(CleanInsightsFeature.ua),e.grantFeature(CleanInsightsFeature.lang);return}if(e==="denied"){document.getElementById("tracking-banner").style.display="none";return}document.getElementById("tracking-banner").style.display="flex"})</script><div id=tracking-banner class="pointer-events-none fixed inset-x-0 bottom-0 z-50 hidden px-6 pb-6"><div class="pointer-events-auto mx-auto max-w-xl rounded-xl bg-white p-6 shadow-lg ring-1 ring-gray-900/10"><p class="prose text-sm leading-6 text-gray-900">Ce site utilise <a href=https://cleaninsights.org/ target=_blank>Clean Insights</a> pour des analyses web respectueuses de la vie privée. En utilisant ce site, vous acceptez la collecte d&rsquo;informations de base telles que le pays, la langue, la navigation et l&rsquo;agent utilisateur.</p><div class="mt-4 flex items-center gap-x-5"><button id=accept-consent class="rounded-md bg-gray-900 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-gray-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-900">
Accepter
</button>
<button id=reject-consent class="text-sm font-semibold leading-6 text-gray-900">Rejeter</button></div></div></div><script>document.addEventListener("DOMContentLoaded",()=>{const e=CleanInsightsAutoTracker("https://metrics.cleaninsights.org/cleaninsights.php",34),t=document.getElementById("tracking-banner"),n=document.getElementById("accept-consent"),s=document.getElementById("reject-consent"),o=()=>{t.style.display="none",e.grantCampaign("visits"),e.grantFeature(CleanInsightsFeature.ua),e.grantFeature(CleanInsightsFeature.lang),localStorage.setItem("trackingConsent","granted")},i=()=>{t.style.display="none",localStorage.setItem("trackingConsent","denied")};n.addEventListener("click",o),s.addEventListener("click",i)})</script><script type=module>
    await import('/pagefind/pagefind-highlight.js');
    new PagefindHighlight({ highlightParam: "highlight" });
</script></body>